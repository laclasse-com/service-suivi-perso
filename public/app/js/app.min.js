var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,b,g){d!=Array.prototype&&d!=Object.prototype&&(d[b]=g.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,b,g,a){if(b){g=$jscomp.global;d=d.split(".");for(a=0;a<d.length-1;a++){var e=d[a];e in g||(g[e]={});g=g[e]}d=d[d.length-1];a=g[d];b=b(a);b!=a&&null!=b&&$jscomp.defineProperty(g,d,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.is",function(d){return d?d:function(b,d){return b===d?0!==b||1/b===1/d:b!==b&&d!==d}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(d){return d?d:function(b,d){var a=this;a instanceof String&&(a=String(a));var e=a.length;for(d=d||0;d<e;d++)if(a[d]==b||Object.is(a[d],b))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(d,b,g){if(null==d)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return d+""};$jscomp.polyfill("String.prototype.includes",function(d){return d?d:function(b,d){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,d||0)}},"es6","es3");
angular.module("suiviApp",["ngColorPicker","ngResource","textAngular","ui.bootstrap","ui.router"]).config(["$httpProvider",function(d){d.defaults.withCredentials=!0}]).config(["$provide",function(d){d.decorator("taTranslations",["$delegate",function(b){b.html.tooltip="Basculer entre les vues HTML et texte enrichi";b.justifyLeft.tooltip="Justifier \u00e0 gauche";b.justifyCenter.tooltip="Centrer";b.justifyRight.tooltip="Justifier \u00e0 droite";b.bold.tooltip="Mettre en gras";b.italic.tooltip="Mettre en italique";
b.underline.tooltip="Souligner";b.insertLink.tooltip="Ins\u00e9rer un lien";b.insertLink.dialogPrompt="Lien \u00e0 ins\u00e9rer";b.editLink.targetToggle.buttontext="Le lien s'ouvrira dans une nouvelle fen\u00eatre";b.editLink.reLinkButton.tooltip="\u00c9diter le lien";b.editLink.unLinkButton.tooltip="Enlever le lien";b.insertImage.tooltip="Ins\u00e9rer une image";b.insertImage.dialogPrompt="URL de l'image :";b.insertVideo.tooltip="Ins\u00e9rer une vid\u00e9o";b.insertVideo.dialogPrompt="URL de la vid\u00e9o Youtube :";
b.clear.tooltip="Enlever le formattage";b.ul.tooltip="Liste";b.ol.tooltip="Liste num\u00e9rot\u00e9e";b.quote.tooltip="Citation";b.undo.tooltip="Annuler";b.redo.tooltip="R\u00e9tablir";return b}]);d.decorator("taOptions",["$delegate","taRegisterTool",function(b,d){d("fontColor",function(a){var b="backcolor"===a?"background-":"",d="#7bd148 #5484ed #a4bdfc #46d6db #7ae7bf #51b749 #fbd75b #ffb878 #ff887c #dc2127 #dbadff #e1e1e1".split(" ");"backcolor"===a&&d.push("transparent");return{couleurs:d,display:'\x3cspan uib-dropdown\x3e\x3ca uib-dropdown-toggle\x3e\x3ci class\x3d"fa fa-font" data-ng-style\x3d"{\''+
b+'color\': selected }"\x3e\x3c/i\x3e \x3ci class\x3d"fa fa-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cng-color-picker uib-dropdown-menu selected\x3d"selected" colors\x3d"couleurs"\x3e\x3c/ng-color-picker\x3e\x3c/span\x3e',action:function(){return"nil"===this.selected?!1:this.$editor().wrapSelection(a,this.selected)}}}("forecolor"));d("table",{columns:{value:1,hovered:1},rows:{value:1,hovered:1},hover:function(a,b){a.hovered=b},leave:function(a){a.hovered=a.value},tooltiptext:"ins\u00e9rer un tableau",
display:'\n              \x3cspan uib-dropdown\x3e\n                \x3ca uib-dropdown-toggle\x3e\n                  \x3ci class\x3d"fa fa-table"\x3e\n                  \x3c/i\x3e\n                  \x3ci class\x3d"fa fa-caret-down"\x3e\n                  \x3c/i\x3e\n                \x3c/a\x3e\n                \x3cdiv uib-dropdown-menu data-ng-click\x3d"$event.stopPropagation()"\x3e\n                  \x3clabel\x3e\n                    \x3cspan uib-rating on-hover\x3d"hover( columns, value )" on-leave\x3d"leave( columns )" ng-model\x3d"columns.value" max\x3d"15" state-on\x3d"\'glyphicon-stop\'" state-off\x3d"\'glyphicon-unchecked\'"\x3e\n                    \x3c/span\x3e\n                    \x3cbr\x3e{{columns.hovered}} colonnes\n                  \x3c/label\x3e\n                  \x3cbr\x3e\n                    \x3clabel\x3e\n                      \x3cspan uib-rating on-hover\x3d"hover( rows, value )" on-leave\x3d"leave( rows )" ng-model\x3d"rows.value" max\x3d"15" state-on\x3d"\'glyphicon-stop\'" state-off\x3d"\'glyphicon-unchecked\'"\x3e\n                      \x3c/span\x3e\n                      \x3cbr\x3e{{rows.hovered}} lignes\n                    \x3c/label\x3e\n                    \x3cbr\x3e\n                      \x3cbutton class\x3d"btn btn-success" data-ng-click\x3d"insert_table()"\x3eIns\u00e9rer\x3c/button\x3e\n                    \x3c/div\x3e\n                  \x3c/span\x3e\n',
insert_table:function(){var a="";_(this.columns.value).times(function(b){a+="\x3ctd\x3e\x26nbsp;\x3c/td\x3e"});var b="";_(this.rows.value).times(function(d){b=b+"\x3ctr\x3e"+a+"\x3c/tr\x3e"});this.$editor().wrapSelection("insertHTML",'\x3ctable class\x3d"table table-bordered"\x3e'+b+"\x3c/table\x3e");this.deferration.resolve()},action:function(a){this.deferration=a;return!1}});b.toolbar=["bold italics underline ul ol quote fontColor justifyLeft justifyCenter justifyRight table insertLink insertImage html undo redo".split(" ")];
b.classes={focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"};return b}]);d.decorator("taTools",["$delegate",function(b){b.html.buttontext="HTML";return b}])}]);
angular.module("suiviApp").config(["$stateProvider","$urlRouterProvider",function(d,b){b.otherwise("/");d.state("trombinoscope",{url:"/",component:"trombinoscope"}).state("carnet",{url:"/carnet/:uid_eleve",component:"carnet",resolve:{uidEleve:["$transition$",function(b){return b.params().uid_eleve}]}})}]);angular.module("suiviApp").component("carnet",{bindings:{uidEleve:"\x3c"},template:'\n\x3cdiv class\x3d"col-md-4 gris1-moins aside aside-carnet"\x3e\n    \x3ca class\x3d"col-md-12 btn btn-lg noir-moins go-back" ui:sref\x3d"trombinoscope()"\x3e \u21b0 Retour au trombinoscope \x3c/a\x3e\n\n    \x3cuser-details class\x3d"user-details eleve"\n                  uid\x3d"$ctrl.uidEleve"\n                  show-avatar\x3d"true"\n                  show-emails\x3d"true"\n                  show-classe\x3d"true"\n                  show-birthdate\x3d"true"\n                  show-address\x3d"true"\n                  show-concerned-people\x3d"true"\x3e\x3c/user-details\x3e\n\x3c/div\x3e\n\n\x3conglets class\x3d"col-md-8 carnet"\n         uid-eleve\x3d"$ctrl.uidEleve"\x3e\x3c/onglets\x3e\n'});
angular.module("suiviApp").component("droitsOnglets",{bindings:{droits:"\x3d",concernedPeople:"\x3c"},controller:["DroitsOnglets","APIs","UID","URL_ENT",function(d,b,g,a){var e=this;e.sharing_enabled=!1;var f=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var a=16*Math.random()|0;return("x"==c?a:a&3|8).toString(16)})};e.have_own_right=function(){return _.chain(e.droits).findWhere({own:!0}).isUndefined()};e.add=function(c){c.new=!0;c.dirty={uid:!1,profil_id:!1,
sharable_id:!1,read:!1,write:!1,manage:!1};e.droits.push(new d(c))};e.add_sharable=function(c){c.sharable_id=f();e.add(c)};var h=function(c){_(c).has("dirty")||(c.dirty={uid:!1,profil_id:!1,sharable_id:!1,read:!1,write:!1,manage:!1})};e.set_read=function(c){h(c);c.dirty.read=!0;!c.read&&c.write&&(c.write=!1,c.dirty.write=!0);!c.read&&c.manage&&(c.manage=!1,c.dirty.manage=!0)};e.set_write=function(c){h(c);c.dirty.write=!0;c.write&&!c.read&&(c.read=!0,c.dirty.read=!0);!c.write&&c.manage&&(c.manage=
!1,c.dirty.manage=!0)};e.set_manage=function(c){h(c);c.dirty.manage=!0;c.manage&&!c.write&&(c.write=!0,c.dirty.write=!0);c.manage&&!c.read&&(c.read=!0,c.dirty.read=!0)};e.update_deletabilities=function(){var c=1==_(e.droits).reject(function(c){return c.to_delete}).length;_(e.droits).each(function(a){a.deletable=!c;a.deletable=a.deletable&&!a.own})};e.$onInit=function(){e.UID=g;e.update_deletabilities();b.query_profiles_types().then(function(c){e.profils=c.data},function(c){})}}],template:'\n\x3cdiv\x3e\n    \x3clabel\x3eGestion des droits\x3c/label\x3e\n    \x3ctable style\x3d"width: 100%;"\x3e\n        \x3ctr style\x3d"text-align: right;"\n            ng:repeat\x3d"droit in $ctrl.droits"\n            ng:if\x3d"ctrl.sharing_enabled || !droit.sharable_id"\x3e\n            \x3ctd\x3e\n                \x3clabel ng:if\x3d"droit.uid"\x3ePersonne :\n                    \x3cselect style\x3d"width: 250px;"\n                            ng:model\x3d"droit.uid"\n                            ng:change\x3d"droit.dirty.uid \x3d true"\n                            ng:disabled\x3d"droit.to_delete"\n                            ng:options\x3d"people.id as people.firstname + \' \' + people.lastname group by people.type for people in $ctrl.concernedPeople"\x3e\n                    \x3c/select\x3e\n                \x3c/label\x3e\n                \x3clabel ng:if\x3d"droit.profil_id"\x3eProfil :\n                    \x3cselect style\x3d"width: 250px;"\n                            ng:model\x3d"droit.profil_id"\n                            ng:change\x3d"droit.dirty.profil_id \x3d true"\n                            ng:disabled\x3d"droit.to_delete"\x3e\n                        \x3coption ng:repeat\x3d"profil in $ctrl.profils track by profil.id"\n                                ng:value\x3d"profil.id"\x3e{{profil.name}}\x3c/option\x3e\n                    \x3c/select\x3e\n                \x3c/label\x3e\n                \x3clabel ng:if\x3d"droit.sharable_id"\x3ePartage :\n                    \x3cinput style\x3d"width: 250px;"\n                           type\x3d"text"\n                           ng:model\x3d"droit.sharable_id"\n                           ng:change\x3d"droit.dirty.sharable_id \x3d true"\n                           ng:disabled\x3d"droit.to_delete" /\x3e\n                \x3c/label\x3e\n            \x3c/td\x3e\n            \x3ctd\x3e\n                \x3cbutton type\x3d"button" class\x3d"btn"\n                        ng:class\x3d"{\'btn-default\': !droit.read, \'btn-success\': droit.read}"\n                        ng:model\x3d"droit.read"\n                        ng:change\x3d"$ctrl.set_read( droit )"\n                        ng:disabled\x3d"droit.to_delete || droit.sharable_id"\n                        uib:btn-checkbox\n                        btn-checkbox-true\x3d"true"\n                        btn-checkbox-false\x3d"false"\n                        uib:tooltip\x3d"droit de lecture"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-eye-open"\x3e\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/td\x3e\n            \x3ctd\x3e\n                \x3cbutton type\x3d"button" class\x3d"btn"\n                        ng:class\x3d"{\'btn-default\': !droit.write, \'btn-success\': droit.write}"\n                        ng:model\x3d"droit.write"\n                        ng:change\x3d"$ctrl.set_write( droit )"\n                        ng:disabled\x3d"droit.to_delete || droit.sharable_id"\n                        uib:btn-checkbox\n                        btn-checkbox-true\x3d"true"\n                        btn-checkbox-false\x3d"false"\n                        uib:tooltip\x3d"droit d\'\u00e9criture"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-edit"\x3e\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/td\x3e\n            \x3ctd\x3e\n                \x3cbutton type\x3d"button" class\x3d"btn"\n                        ng:class\x3d"{\'btn-default\': !droit.manage, \'btn-success\': droit.manage}"\n                        ng:model\x3d"droit.manage"\n                        ng:change\x3d"$ctrl.set_manage( droit )"\n                        ng:disabled\x3d"droit.to_delete || droit.sharable_id"\n                        uib:btn-checkbox\n                        btn-checkbox-true\x3d"true"\n                        btn-checkbox-false\x3d"false"\n                        uib:tooltip\x3d"droit d\'administration"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-cog"\x3e\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/td\x3e\n            \x3ctd\x3e\n                \x3cbutton type\x3d"button" class\x3d"btn"\n                        ng:class\x3d"{\'btn-default\': !droit.to_delete, \'btn-warning\': droit.to_delete}"\n                        ng:disabled\x3d"!droit.deletable \x26\x26 !droit.to_delete"\n                        ng:model\x3d"droit.to_delete"\n                        ng:change\x3d"$ctrl.update_deletabilities()"\n                        uib:btn-checkbox\n                        btn-checkbox-true\x3d"true"\n                        btn-checkbox-false\x3d"false"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-trash"\x3e\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctfoot\x3e\n            \x3ctd colspan\x3d"3"\x3e\n                \x3cbutton class\x3d"btn btn-default"\n                        ng:click\x3d"$ctrl.add({ uid: \'...\', read: true, write: true })"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-plus-sign"\x3e\x3c/span\x3e par personne\n                \x3c/button\x3e\n\n                \x3cbutton class\x3d"btn btn-default"\n                        ng:click\x3d"$ctrl.add({ profil_id: \'...\', read: true, write: false })"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-plus-sign"\x3e\x3c/span\x3e par profil\n                \x3c/button\x3e\n\n                \x3cbutton class\x3d"btn btn-warning pull-right"\n                        ng:if\x3d"ctrl.sharing_enabled"\n                        ng:click\x3d"$ctrl.add_sharable({ read: true, write: false })"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-plus-sign"\x3e\x3c/span\x3e partage\n                \x3c/button\x3e\n            \x3c/td\x3e\n        \x3c/tfoot\x3e\n    \x3c/table\x3e\n\x3c/div\x3e\n'});
angular.module("suiviApp").component("onglet",{bindings:{uidEleve:"\x3c",onglets:"\x3c",onglet:"\x3d"},controller:["$uibModal","$state","$q","Saisies","Popups",function(d,b,g,a,e){var f=this;f.manage_onglet=e.onglet;f.order_by={field:"date",reverse:!0};f.callback_popup_onglet=function(c){"deleted"==c.action&&b.go("carnet",{uid_eleve:f.uidEleve},{reload:!0})};f.saisie_callback=function(c){switch(c.action){case "created":f.saisies.push(c);h();break;case "deleted":f.saisies=_(f.saisies).reject(function(a){return a.id===
c.id});break;case "updated":break;default:console.log("What to do with this?"),console.log(c)}};var h=function(){f.new_saisie=f.onglet.writable?{create_me:!0}:null};f.$onInit=function(){h();a.query({uid_eleve:f.uidEleve,onglet_id:f.onglet.id}).$promise.then(function(c){f.saisies=c},function(c){})}}],template:'\n\x3cspan class\x3d"hidden-xs hidden-sm floating-button toggle big off jaune"\nng:if\x3d"$ctrl.onglet.manageable"\nng:click\x3d"$ctrl.manage_onglet( $ctrl.uidEleve, $ctrl.onglet, $ctrl.onglets, $ctrl.callback_popup_onglet )"\x3e\x3c/span\x3e\n\n\x3csaisie class\x3d"col-md-12"\nstyle\x3d"display: inline-block;"\nng:if\x3d"$ctrl.new_saisie"\nuid-eleve\x3d"$ctrl.uidEleve"\nonglet\x3d"$ctrl.onglet"\nsaisie\x3d"$ctrl.new_saisie"\ncallback\x3d"$ctrl.saisie_callback( $ctrl.new_saisie )"\x3e\x3c/saisie\x3e\n\n\x3cdiv class\x3d"col-md-12" style\x3d"margin-bottom: 10px;"\x3e\n\x3cbutton class\x3d"btn btn-sm btn-primary pull-right"\nng:click\x3d"$ctrl.order_by.reverse \x3d !$ctrl.order_by.reverse"\nng:if\x3d"$ctrl.saisies.length \x3e 1"\x3e\n\x3cspan class\x3d"glyphicon"\nng:class\x3d"{\'glyphicon-sort-by-order\': $ctrl.order_by.reverse, \'glyphicon-sort-by-order-alt\': !$ctrl.order_by.reverse}"\x3e\x3c/span\x3e\nTrier par la date de publication la plus \x3cspan ng:if\x3d"$ctrl.order_by.reverse"\x3er\u00e9cente\x3c/span\x3e\x3cspan ng:if\x3d"!$ctrl.order_by.reverse"\x3eancienne\x3c/span\x3e.\n\x3c/button\x3e\n\x3c/div\x3e\n\n\x3cdiv class\x3d"col-md-12 saisies" style\x3d"overflow-y: auto;"\x3e\n\n\x3csaisie class\x3d"col-md-12" style\x3d"display: inline-block;"\nng:repeat\x3d"saisie in $ctrl.saisies | orderBy:$ctrl.order_by.field:$ctrl.order_by.reverse"\nuid-eleve\x3d"$ctrl.uidEleve"\nonglet\x3d"$ctrl.onglet"\nsaisie\x3d"saisie"\ncallback\x3d"$ctrl.saisie_callback( saisie )"\x3e\x3c/saisie\x3e\n\x3c/div\x3e\n'});
angular.module("suiviApp").component("onglets",{bindings:{uidEleve:"\x3c"},controller:["$uibModal","Carnets","Onglets","Popups",function(d,b,g,a){var e=this;e.popup_onglet=a.onglet;e.callback_popup_onglet=function(a){a.created&&e.onglets.push(a)};e.$onInit=function(){b.get({uid_eleve:e.uidEleve}).$promise.then(function(a){e.carnet=a;g.query({uid_eleve:e.uidEleve}).$promise.then(function(a){e.onglets=a},function(a){})},function(a){})}}],template:'\n\x3cuib-tabset\x3e\n    \x3cuib-tab ng:repeat\x3d"onglet in $ctrl.onglets"\x3e\n        \x3cuib-tab-heading\x3e {{onglet.nom}} \x3c/uib-tab-heading\x3e\n\n        \x3conglet uid-eleve\x3d"$ctrl.uidEleve"\n                onglets\x3d"$ctrl.onglets"\n                onglet\x3d"onglet"\x3e\x3c/onglet\x3e\n    \x3c/uib-tab\x3e\n\n    \x3cli\x3e\n        \x3ca href\n           class\x3d"bleu add-onglet"\n           ng:click\x3d"$ctrl.popup_onglet( $ctrl.uidEleve, null, $ctrl.onglets, $ctrl.callback_popup_onglet )"\x3e\n            \x3cspan class\x3d"glyphicon glyphicon-plus"\x3e\x3c/span\x3e\n        \x3c/a\x3e\n    \x3c/li\x3e\n\x3c/uib-tabset\x3e\n'});
angular.module("suiviApp").component("saisie",{bindings:{uidEleve:"\x3c",onglet:"\x3c",saisie:"\x3d",callback:"\x26"},controller:["$sce","Saisies","APIs",function(d,b,g){var a=this;a.toggle_edit=function(){a.edition=!a.edition;a.edition||(a.saisie.trusted_contenu=d.trustAsHtml(a.saisie.contenu))};a.cancel=function(){a.toggle_edit()};a.save=function(){_(a.saisie).has("$save")||(a.saisie.onglet_id=a.onglet.id,a.saisie.uid_eleve=a.uidEleve,a.saisie=new b(a.saisie));(a.new_saisie?a.saisie.$save():a.saisie.$update()).then(function(b){a.new_saisie||
a.toggle_edit();a.saisie.action=a.new_saisie?"created":"updated";a.callback()},function(a){console.log(a)})};a.delete=function(){swal({title:"\u00cates-vous sur ?",text:"La saisie sera d\u00e9finitivement supprim\u00e9e !",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Oui, je confirme !",cancelButtonColor:"#d33",cancelButtonText:"Annuler"}).then(function(){a.saisie.$delete().then(function(){a.saisie.action="deleted";a.callback()})})};a.$onInit=function(){(a.edition=
a.saisie.create_me)?(a.new_saisie=!0,a.saisie.contenu=""):a.saisie=new b(a.saisie);a.saisie.uid_eleve=a.uidEleve;a.saisie.trusted_contenu=d.trustAsHtml(a.saisie.contenu);g.get_current_user().then(function(b){a.current_user=b;a.editable=a.onglet.writable&&a.saisie.uid_author===a.current_user.id})};a.$onChanges=function(b){a.saisie.uid_eleve=a.uidEleve;a.saisie.trusted_contenu=d.trustAsHtml(a.saisie.contenu)}}],template:'\n\x3cdiv class\x3d"panel panel-default saisie-display"\x3e\n    \x3cdiv class\x3d"panel-heading" ng:if\x3d"$ctrl.saisie.id"\x3e\n        \x3cuser-details class\x3d"col-md-4"\n                      ng:if\x3d"!$ctrl.saisie.new_saisie"\n                      uid\x3d"$ctrl.saisie.uid_author"\n                      small\x3d"true"\n                      show-avatar\x3d"true"\x3e\x3c/user-details\x3e\n        {{$ctrl.saisie.date_creation | date:\'medium\'}}\n        \x3cdiv class\x3d"clearfix"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"panel-body" ng:style\x3d"{\'padding\': $ctrl.new_saisie ? 0 : \'inherit\', \'border\': $ctrl.new_saisie ? 0 : \'inherit\'}"\x3e\n\n        \x3cdiv class\x3d"col-md-12"\n             ng:bind-html\x3d"$ctrl.saisie.trusted_contenu"\n             ng:if\x3d"!$ctrl.edition"\x3e\x3c/div\x3e\n\n        \x3cdiv class\x3d"col-md-12"\n             ng:style\x3d"{\'padding\': $ctrl.new_saisie ? 0 : \'inherit\'}"\n             ng:if\x3d"$ctrl.edition"\x3e\n            \x3ctext-angular ta:target-toolbars\x3d"main-ta-toolbar-{{$ctrl.onglet.id}}-{{$ctrl.saisie.id}}"\n                          ng:model\x3d"$ctrl.saisie.contenu"\n                          ng:change\x3d"$ctrl.dirty \x3d true"\x3e\x3c/text-angular\x3e\n            \x3cdiv class\x3d"suivi-ta-toolbar gris2-moins"\x3e\n                \x3ctext-angular-toolbar class\x3d"pull-left"\n                                      style\x3d"margin-left: 0;"\n                                      name\x3d"main-ta-toolbar-{{$ctrl.onglet.id}}-{{$ctrl.saisie.id}}"\x3e\x3c/text-angular-toolbar\x3e\n                \x3cbutton class\x3d"btn btn-success pull-right"\n                        ng:disabled\x3d"!$ctrl.dirty"\n                        ng:click\x3d"$ctrl.save()"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-save" \x3e\x3c/span\x3e Publier\n                \x3c/button\x3e\n                \x3cbutton class\x3d"btn btn-default pull-right"\n                        ng:click\x3d"$ctrl.cancel()"\n                        ng:if\x3d"$ctrl.saisie.id"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-edit" \x3e\x3c/span\x3e Annuler\n                \x3c/button\x3e\n                \x3cdiv class\x3d"clearfix"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"panel-footer" ng:if\x3d"!$ctrl.edition"\x3e\n        \x3cdiv class\x3d"pull-right buttons"\x3e\n            \x3cbutton class\x3d"btn btn-default"\n                    ng:click\x3d"$ctrl.toggle_edit()"\n                    ng:if\x3d"$ctrl.editable"\x3e\n                \x3cspan class\x3d"glyphicon glyphicon-edit" \x3e\x3c/span\x3e \u00c9diter\n            \x3c/button\x3e\n\n            \x3cbutton class\x3d"btn btn-danger"\n                    ng:click\x3d"$ctrl.delete()"\n                    ng:if\x3d"$ctrl.saisie.id \x26\x26 ( $ctrl.editable || $ctrl.current_user.is_admin() )"\x3e\n                \x3cspan class\x3d"glyphicon glyphicon-trash"\x3e\x3c/span\x3e Supprimer\n            \x3c/button\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"clearfix"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n'});
angular.module("suiviApp").component("trombinoscope",{controller:["$q","URL_ENT","APIs",function(d,b,g){var a=this;a.search="";a.only_display_contributed_to=!1;a.eleves=[];var e=void 0,f=function(a){return(_(a.match(/^(user|http)/)).isNull()?b+"/":"")+a};g.get_current_user().then(function(a){e=a;e.avatar=f(e.avatar);return g.get_current_user_groups()}).then(function(b){b=_(b).where({type:"CLS"});"ELV"===e.profil_actif.type?(e.regroupement={libelle:b[0].name},a.eleves=[e]):"TUT"===e.profil_actif.type?
(b=_(e.children).pluck("child_id"),_(b).isEmpty()||g.get_users(b).then(function(c){a.eleves=a.eleves.concat(_(c.data).map(function(a){a.avatar=f(a.avatar);var c=_(a.groups).pluck("group_id");_(c).isEmpty()||g.get_groups(c).then(function(c){c=_(c.data).findWhere({type:"CLS"});_(c).isUndefined()||(a.regroupement={id:c.id,name:c.name,type:c.type},a.etablissement=c.structure_id,a.enseignants=c.profs)});return a}))})):g.get_groups(_.chain(b).select(function(a){return _(a).has("structure_id")&&a.structure_id===
e.profil_actif.structure_id}).pluck("id").uniq().value()).then(function(c){a.groups=c.data;a.eleves=[];_(c.data).each(function(c){c.profs=_.chain(c.users).select(function(a){return"ENS"===a.type}).pluck("user_id").value();var b=_.chain(c.users).select(function(a){return"ELV"===a.type}).pluck("user_id").value();g.get_users(b).then(function(b){a.eleves=a.eleves.concat(_(b.data).map(function(a){a.avatar=f(a.avatar);a.regroupement={id:c.id,name:c.name,type:c.type};a.etablissement=c.structure_id;a.enseignants=
c.profs;return a}))})})},function(a){});g.query_carnets_contributed_to(e.id).then(function(c){a.contributed_to=c.data},function(a){})})}],template:'\n      \x3cdiv class\x3d"col-md-4 blanc aside" style\x3d"padding: 0;"\x3e\n        \x3cdiv class\x3d"search-filter" style\x3d"padding: 20px; background-color: #baddad;"\x3e\n          \x3clabel for\x3d"search"\x3e Filtrage des \u00e9l\u00e8ves affich\u00e9s : \x3c/label\x3e\n          \x3cinput  class\x3d"form-control input-sm"\n                  style\x3d"display: inline; max-width: 300px;"\n                  type\x3d"text" name\x3d"search"\n                  ng:model\x3d"$ctrl.search" /\x3e\n          \x3cbutton class\x3d"btn btn-sm" style\x3d"margin-left: -5px;"\n                  ng:click\x3d"$ctrl.search \x3d \'\'"\x3e\n            \x3cspan class\x3d"glyphicon glyphicon-remove"\x3e\n            \x3c/span\x3e\n          \x3c/button\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"group-filter" style\x3d"padding: 20px; background-color: #baddad;"\x3e\n          \x3clabel\x3e Filtrage par classe : \x3c/label\x3e\n          \x3cbutton class\x3d"btn btn-sm" style\x3d"margin: 2px;"\n                  ng:repeat\x3d"group in $ctrl.groups"\n                  ng:click\x3d"$ctrl.search \x3d group.name;"\x3e{{group.name}}\x3c/button\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"highlighted" style\x3d"padding: 20px;"\x3e\n          \x3clabel ng:if\x3d"$ctrl.contributed_to.length \x3e 0"\x3e Carnet\x3cspan ng:if\x3d"$ctrl.contributed_to.length \x3e 1"\x3es\x3c/span\x3e\n          \x3cspan ng:if\x3d"$ctrl.contributed_to.length \x3e 1"\x3eauxquels\x3c/span\x3e\n          \x3cspan ng:if\x3d"$ctrl.contributed_to.length \x3c 2"\x3eauquel\x3c/span\x3e vous avez contribu\u00e9 : \x3c/label\x3e\n          \x3cul\x3e\n            \x3cli ng:repeat\x3d"carnet in $ctrl.contributed_to" style\x3d"list-style-type: none;"\x3e\n              \x3ca ui:sref\x3d"carnet({uid_eleve: carnet.uid_eleve})"\x3e\n                \x3cuser-details uid\x3d"carnet.uid_eleve"\n                              small\x3d"true"\n                              show-classe\x3d"true"\n                              show-avatar\x3d"true"\x3e\n                \x3c/user-details\x3e\n              \x3c/a\x3e\n            \x3c/li\x3e\n          \x3c/ul\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n\n      \x3cdiv class\x3d"col-md-8 damier trombinoscope"\x3e\n        \x3cul\x3e\n          \x3cli class\x3d"col-xs-6 col-sm-4 col-md-3 col-lg-2 petite case vert-moins"\n              style\x3d"background-repeat: no-repeat; background-attachment: scroll; background-clip: border-box; background-origin: padding-box; background-position-x: center; background-position-y: center; background-size: 100% auto;"\n              ng:style\x3d"{\'background-image\': \'url( {{eleve.avatar}} )\' }"\n              ng:repeat\x3d"eleve in $ctrl.eleves | filter:$ctrl.search | orderBy:[\'regroupement.name\', \'lastname\']"\x3e\n            \x3ca class\x3d"eleve"\n               ui:sref\x3d"carnet({uid_eleve: eleve.id})"\x3e\n              \x3ch5 class\x3d"regroupement"\x3e{{eleve.regroupement.name}}\x3c/h5\x3e\n\n              \x3cdiv class\x3d"full-name"\x3e\n                \x3ch4 class\x3d"first-name"\x3e{{eleve.firstname}}\x3c/h4\x3e\n                \x3ch3 class\x3d"last-name"\x3e{{eleve.lastname}}\x3c/h3\x3e\n              \x3c/div\x3e\n            \x3c/a\x3e\n          \x3c/li\x3e\n        \x3c/ul\x3e\n      \x3c/div\x3e\n'});
angular.module("suiviApp").component("userDetails",{bindings:{uid:"\x3c",small:"\x3c",showAvatar:"\x3c",showConcernedPeople:"\x3c",showPhones:"\x3c",showEmails:"\x3c",showClasse:"\x3c",showAddress:"\x3c",showBirthdate:"\x3c"},controller:["APIs","URL_ENT",function(d,b){var g=this;g.URL_ENT=b;g.$onInit=function(){d.get_user(g.uid).then(function(a){g.user=a.data;g.showClasse&&g.user.get_actual_groups().then(function(a){g.user.actual_groups=a;_(g.user.actual_groups).each(function(a){d.get_structure(a.structure_id).then(function(b){a.structure=
b.data})})})},function(a){});g.showConcernedPeople&&d.query_people_concerned_about(g.uid).then(function(a){g.concerned_people=_(a).groupBy("type");delete g.concerned_people["\u00c9l\u00e8ve"]},function(a){})}}],template:'\n      \x3cdiv class\x3d"col-md-12"\x3e\n        \x3cdiv class\x3d"avatar-container gris4 pull-left" ng:style\x3d"{\'height\': $ctrl.small ? \'44px\' : \'175px\', \'width\': $ctrl.small ? \'44px\' : \'175px\'}"\x3e\n          \x3cimg class\x3d"avatar noir-moins"\n               ng:style\x3d"{\'max-height\': $ctrl.small ? \'44px\' : \'175px\', \'max-width\': $ctrl.small ? \'44px\' : \'175px\'}"\n               ng:src\x3d"{{$ctrl.URL_ENT + \'/\' + $ctrl.user.avatar}}"\n               ng:if\x3d"$ctrl.showAvatar" /\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"col-md-8 details"\x3e\n          \x3cdiv class\x3d"col-md-12"\x3e\n            \x3cspan class\x3d"first-name"\n                  ng:style\x3d"{\'font-size\': $ctrl.small ? \'100%\' : \'150%\'}"\x3e {{$ctrl.user.firstname}}\n            \x3c/span\x3e\n            \x3cspan class\x3d"last-name"\n                  ng:style\x3d"{\'font-size\': $ctrl.small ? \'100%\' : \'175%\'}"\x3e {{$ctrl.user.lastname}}\n            \x3c/span\x3e\n          \x3c/div\x3e\n\n          \x3cspan class\x3d"col-md-12 classe" ng:if\x3d"$ctrl.showClasse"\x3e\n            \x3cspan ng:repeat\x3d"group in $ctrl.user.actual_groups | filter:{type: \'CLS\'}"\x3e\n              {{group.name}} - {{group.structure.name}}\n            \x3c/span\x3e\n          \x3c/span\x3e\n\n          \x3cspan class\x3d"col-md-12 birthdate" ng:if\x3d"$ctrl.showBirthdate"\x3e\n            n\u00e9\x3cspan ng:if\x3d"$ctrl.user.gender \x3d\x3d\x3d \'F\'"\x3ee\x3c/span\x3e le {{$ctrl.user.birthdate | date}}\n          \x3c/span\x3e\n          \x3cdiv class\x3d"col-md-12 email"\n               ng:repeat\x3d"email in $ctrl.user.emails"\n               ng:if\x3d"$ctrl.showEmails"\x3e\n            \x3cspan class\x3d"glyphicon glyphicon-envelope"\x3e\n            \x3c/span\x3e\n            \x3ca href\x3d"mailto:{{email.address}}"\x3e{{email.address}}\x3c/a\x3e\n          \x3c/div\x3e\n          \x3cspan class\x3d"col-md-12 address"\n                ng:if\x3d"$ctrl.showAddress \x26\x26 $ctrl.user.adresse"\x3e\n            \x3cspan class\x3d"glyphicon glyphicon-home"\x3e\n            \x3c/span\x3e\n            \x3cspan style\x3d"display: inline-table;"\x3e\n              {{$ctrl.user.address}}\n              \x3cbr\x3e\n                {{$ctrl.user.zipcode}} {{$ctrl.user.city}}\n              \x3c/span\x3e\n            \x3c/span\x3e\n            \x3cdiv class\x3d"col-md-12 phone"\n                 ng:repeat\x3d"phone in $ctrl.user.phones"\n                 ng:if\x3d"$ctrl.showPhones"\x3e\n              \x3cspan class\x3d"glyphicon"\n                    ng:class\x3d"{\'glyphicon-phone\': phone.type \x3d\x3d\x3d \'PORTABLE\', \'glyphicon-phone-alt\': phone.type !\x3d\x3d \'PORTABLE\'}"\x3e\n                {{phone.type}}: {{phone.number}}\n              \x3c/span\x3e\n            \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n\n        \x3cfieldset class\x3d"pull-left col-md-12 parents" ng:if\x3d"$ctrl.showConcernedPeople"\x3e\n          \x3clegend\x3ePersonnes concern\u00e9es\x3c/legend\x3e\n          \x3cuib-accordion\x3e\n            \x3cdiv uib-accordion-group\n            class\x3d"panel-default"\n            ng:repeat\x3d"(type, peoples) in $ctrl.concerned_people"\n            ng:if\x3d"type !\x3d \'Autre \u00e9l\u00e8ve suivi\'"\x3e\n            \x3cuib-accordion-heading\x3e\n              \x3cspan class\x3d"glyphicon" ng:class\x3d"{\'glyphicon-menu-down\': type.is_open, \'glyphicon-menu-right\': !type.is_open}"\x3e\n                \x3c/span\x3e {{type}}\n            \x3c/uib-accordion-heading\x3e\n            \x3cul\x3e\n              \x3cli ng:repeat\x3d"people in peoples | orderBy:\'lastname\'"\x3e\n                \x3cspan ng:if\x3d"!people.contributed_to"\x3e{{people.firstname}} {{people.lastname}}\x3c/span\x3e\n                \x3cspan ng:if\x3d"people.contributed_to"\x3e\n                  \x3ca ui:sref\x3d"carnet({uid_eleve: people.id})"\x3e{{people.firstname}} {{people.lastname}}\x3c/a\x3e\n                \x3c/span\x3e\n                \x3cspan ng:if\x3d"people.prof_principal"\x3e (enseignant principal)\x3c/span\x3e\n                \x3cspan ng:if\x3d"people.actual_subjects"\x3e\n                  \x3cbr/\x3e\n                  \x3cem ng:repeat\x3d"subject in people.actual_subjects"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-briefcase"\x3e\n                      \x3c/span\x3e {{subject.name}}\n                  \x3c/em\x3e\n                \x3c/span\x3e\n                \x3cspan ng:if\x3d"people.emails.length \x3e 0"\x3e\n                  \x3cbr/\x3e\n                  \x3cspan class\x3d"glyphicon glyphicon-envelope"\x3e\n                  \x3c/span\x3e\n                  \x3ca href\x3d"mailto:{{people.emails[0].address}}"\x3e{{people.emails[0].address}}\x3c/a\x3e\n                \x3c/span\x3e\n              \x3c/li\x3e\n            \x3c/ul\x3e\n          \x3c/div\x3e\n        \x3c/uib-accordion\x3e\n      \x3c/fieldset\x3e\n'});
angular.module("suiviApp").factory("Carnets",["$resource","APP_PATH",function(d,b){return d(b+"/api/carnets/:uid_eleve",{uid_eleve:"@uid_eleve"},{update:{method:"PUT"}})}]);angular.module("suiviApp").factory("DroitsOnglets",["$resource","APP_PATH",function(d,b){return d(b+"/api/carnets/:uid_eleve/onglets/:onglet_id/droits/:id",{uid_eleve:"@uid_eleve",onglet_id:"@onglet_id",id:"@id",uid:"@uid",profil_id:"@profil_id",sharable_id:"@sharable_id",read:"@read",write:"@write",manage:"@manage"},{update:{method:"PUT"}})}]);
angular.module("suiviApp").factory("Onglets",["$resource","APP_PATH",function(d,b){return d(b+"/api/carnets/:uid_eleve/onglets/:id",{uid_eleve:"@uid_eleve",id:"@id",nom:"@nom"},{update:{method:"PUT"}})}]);angular.module("suiviApp").factory("Saisies",["$resource","APP_PATH",function(d,b){return d(b+"/api/carnets/:uid_eleve/onglets/:onglet_id/saisies/:id",{uid_eleve:"@uid_eleve",onglet_id:"@onglet_id",id:"@id",contenu:"@contenu"},{update:{method:"PUT"}})}]);
angular.module("suiviApp").factory("User",["$resource","$rootScope","URL_ENT","UID",function(d,b,g,a){return d(g+"/api/users/"+a,{expand:"true"},{get:{cache:!1,transformResponse:function(a){var b=angular.fromJson(a);b.profil_actif=_(b.profiles).findWhere({active:!0});b.is_admin=function(){return!_(b.profil_actif).isUndefined()&&!_.chain(b.profiles).findWhere({structure_id:b.profil_actif.structure_id,type:"ADM"}).isUndefined().value()};return b}}})}]);
angular.module("suiviApp").service("APIs",["$http","$q","User","URL_ENT","APP_PATH",function(d,b,g,a,e){var f=this;f.query_profiles_types=_.memoize(function(){return d.get(a+"/api/profiles_types")});f.get_user=_.memoize(function(e){return d.get(a+"/api/users/"+e).then(function(a){a.data.profil_actif=_(a.data.profiles).findWhere({active:!0});_(a.data.profil_actif).isUndefined()&&!_(a.data.profiles).isEmpty()&&(a.data.profil_actif=_(a.data.profiles).first());a.data.get_actual_groups=function(){return f.get_groups(_(a.data.groups).pluck("group_id")).then(function(a){return b.resolve(a.data)})};
a.data.get_actual_subjects=function(){return f.get_subjects(_(a.data.groups).pluck("subject_id")).then(function(a){return b.resolve(a.data)})};return a})});f.get_current_user=_.memoize(function(){return g.get().$promise});f.get_users=_.memoize(function(e){return _(e).isEmpty()?b.resolve({data:[]}):d.get(a+"/api/users/",{params:{"id[]":e}})});f.get_current_user_groups=_.memoize(function(){return f.get_current_user().then(function(a){var c=_.chain(a.groups).pluck("group_id").uniq().value(),d=b.resolve([]);
d=_(["EVS","DIR","ADM"]).contains(a.profil_actif.type)||a.profil_actif.admin?f.get_groups_of_structures([a.profil_actif.structure_id]):f.get_groups(c);return d.then(function(c){a.actual_groups=_(c.data).select(function(b){return b.structure_id===a.profil_actif.structure_id});return b.resolve(a.actual_groups)})})});f.get_group=_.memoize(function(b){return d.get(a+"/api/groups/"+b)});f.get_groups=_.memoize(function(e){return _(e).isEmpty()?b.resolve({data:[]}):d.get(a+"/api/groups/",{params:{"id[]":e}})});
f.get_groups_of_structures=_.memoize(function(b){return d.get(a+"/api/groups/",{params:{"structure_id[]":b}})});f.get_subjects=_.memoize(function(e){return _(e).isEmpty()?b.resolve({data:[]}):d.get(a+"/api/subjects/",{params:{"id[]":e}})});f.query_carnets_contributed_to=function(a){return d.get(e+"/api/carnets/contributed/"+a)};f.get_structure=_.memoize(function(b){return d.get(a+"/api/structures/"+b)});f.query_people_concerned_about=_.memoize(function(a){var c=null,d=[],e=[],g=[],n=null,h=[],m=[],
l=[],k=[];return f.get_current_user().then(function(a){n=a;return f.query_profiles_types()},function(a){return b.reject(a)}).then(function(a){e=_(a.data).indexBy("id");return f.query_carnets_contributed_to(n.id)},function(a){}).then(function(c){g=_(c.data).pluck("uid_eleve");_(g).isEmpty()||f.get_users(g).then(function(a){d.push(_(a.data).map(function(a){a.type="Autre \u00e9l\u00e8ve suivi";return a}))},function(a){return b.reject(a)});return f.get_user(a)},function(a){return b.reject(a)}).then(function(a){c=
a.data;c.type="\u00c9l\u00e8ve";d.push(c);return _(c.parents).isEmpty()?b.resolve({no_parents:!0}):f.get_users(_(c.parents).pluck("parent_id"))},function(a){return b.reject(a)}).then(function(a){_(a).has("data")&&d.push(_(a.data).map(function(a){a.type="Responsable";return a}));return _(c.profil_actif).isUndefined()?b.resolve({no_profile:!0}):f.get_structure(c.profil_actif.structure_id)},function(a){return b.reject(a)}).then(function(a){return _(a).has("data")?(m=_(a.data.profiles).reject(function(a){return _(["ELV",
"TUT","ENS"]).contains(a.type)}),f.get_users(_(m).pluck("user_id"))):b.resolve({no_profile:!0})}).then(function(a){return _(a).has("data")?(m=_(m).indexBy("user_id"),d.push(_(a.data).map(function(a){a.type=e[m[a.id].type].name;return a})),a=_(c.groups).pluck("group_id"),f.get_groups(a)):b.resolve({no_profile:!0})},function(a){return b.reject(a)}).then(function(a){return _(a).has("data")?(h=_.chain(a.data).pluck("users").flatten().value(),l=_(h).where({type:"ELV"}),0<l.length?f.get_users(_(l).pluck("user_id")):
b.resolve({no_pupils:!0})):b.resolve({no_profile:!0})},function(a){return b.reject(a)}).then(function(a){l=_(l).indexBy("user_id");d.push(_(a.data).map(function(a){a.type="Autre \u00e9l\u00e8ve";return a}));k=_(h).where({type:"ENS"});return 0<k.length?f.get_users(_(k).pluck("user_id")):b.resolve()},function(a){return b.reject(a)}).then(function(a){k=_(k).indexBy("user_id");_(h).where({type:"PRI"});d.push(_(a.data).map(function(a){a.type=e[k[a.id].type].name;f.get_subjects(_(a.groups).pluck("subject_id")).then(function(b){a.actual_subjects=
b.data});return a}));return b.resolve()},function(a){return b.reject(a)}).then(function(){return b.resolve(_.chain(d).flatten().uniq(function(a){return a.id}).value())})})}]);
angular.module("suiviApp").service("Popups",["$uibModal","$q","Onglets",function(d,b,g){this.onglet=function(a,e,f,h){d.open({resolve:{uid:function(){return a},onglet:function(){return _(e).isNull()?{nom:""}:e},all_onglets:function(){return f}},controller:["$scope","$uibModalInstance","$q","DroitsOnglets","APIs","URL_ENT","uid","onglet","all_onglets",function(a,b,d,e,g,f,h,l,k){a.$ctrl=a;a.uid=h;a.onglet=l;a.all_onglets=k;a.onglet.delete=!1;a.valid_name=!0;_(a.onglet).has("id")&&e.query({uid_eleve:a.uid,
onglet_id:a.onglet.id}).$promise.then(function(b){a.droits=_(b).map(function(b){b.uid_eleve=a.uid;b.own=b.uid===a.UID;return new e(b)})},function(a){});g.get_user(h).then(function(b){a.eleve=b.data},function(a){});g.query_people_concerned_about(h).then(function(b){a.concerned_people=b},function(a){});a.name_validation=function(){var b=_.chain(a.all_onglets).reject(function(b){return!_(a.onglet).isNull()&&a.onglet.id==b.id}).pluck("nom").value();a.valid_name=!_(b).includes(a.onglet.nom);return a.valid_name};
a.ok=function(){b.close({onglet:a.onglet,droits:a.droits})};a.delete=function(){swal({title:"\u00cates-vous sur ?",text:"L'onglet ainsi que toutes les saisies et droits associ\u00e9s seront d\u00e9finitivement supprim\u00e9s !",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Oui, je confirme !",cancelButtonColor:"#d33",cancelButtonText:"Annuler"}).then(function(){a.onglet.delete=!0;a.ok()})};a.cancel=function(){b.dismiss()}}],template:'\n\x3cdiv class\x3d"modal-header"\x3e\n    \x3ch3 class\x3d"modal-title"\x3e\n        Propri\u00e9t\u00e9s de l\'onglet\n    \x3c/h3\x3e\n\x3c/div\x3e\n\n\x3cdiv class\x3d"modal-body"\x3e\n    \x3clabel\x3eTitre : \x3cinput type\x3d"text" maxlength\x3d"45" ng:model\x3d"$ctrl.onglet.nom" ng:maxlength\x3d"45" ng:change\x3d"$ctrl.onglet.dirty \x3d true; $ctrl.name_validation()" /\x3e\n        \x3cspan class\x3d"label label-danger" ng:if\x3d"!$ctrl.valid_name"\x3eUn onglet existant porte d\u00e9j\u00e0 ce nom !\x3c/span\x3e\n    \x3c/label\x3e\n\n    \x3cdroits-onglets droits\x3d"$ctrl.droits"\n                    concerned-people\x3d"$ctrl.concerned_people"\n                    ng:if\x3d"$ctrl.onglet.id \x26\x26 $ctrl.droits"\x3e\x3c/droits-onglets\x3e\n\n    \x3cdiv class\x3d"clearfix"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\n\x3cdiv class\x3d"modal-footer"\x3e\n    \x3cbutton class\x3d"btn btn-danger pull-left"\n            ng:click\x3d"$ctrl.delete()"\n            ng:if\x3d"$ctrl.onglet.id"\x3e\n        \x3cspan class\x3d"glyphicon glyphicon-trash"\x3e\x3c/span\x3e\n        \x3cspan\x3e Supprimer l\'onglet\x3c/span\x3e\n    \x3c/button\x3e\n    \x3cbutton class\x3d"btn btn-default"\n            ng:click\x3d"$ctrl.cancel()"\x3e\n        \x3cspan class\x3d"glyphicon glyphicon-remove-sign"\x3e\x3c/span\x3e\n        \x3cspan ng:if\x3d"$ctrl.onglet.nom"\x3e Annuler\x3c/span\x3e\n        \x3cspan ng:if\x3d"!$ctrl.onglet.nom"\x3e Fermer\x3c/span\x3e\n    \x3c/button\x3e\n    \x3cbutton class\x3d"btn btn-success"\n            ng:click\x3d"$ctrl.ok()"\n            ng:disabled\x3d"!$ctrl.onglet.nom || !$ctrl.valid_name"\x3e\n        \x3cspan class\x3d"glyphicon glyphicon-ok-sign"\x3e\x3c/span\x3e Valider\n    \x3c/button\x3e\n\x3c/div\x3e\n'}).result.then(function(c){var d=
null,f="rien";_(e).isNull()?(f="created",d=(new g({uid_eleve:a,nom:c.onglet.nom})).$save()):(c.onglet.uid_eleve=a,c.onglet.delete?(f="deleted",d=(new g(c.onglet)).$delete()):d=c.onglet.dirty?(new g(c.onglet)).$update():b.resolve(c.onglet));d.then(function(b){b.action=f;_.chain(c.droits).each(function(b){b.to_delete?_(b).has("id")&&b.$delete():b.dirty&&"..."!==b.uid&&"..."!==b.profil_id&&"..."!==b.sharable_id&&_(b.dirty).reduce(function(a,b){return a||b},!1)&&b.read&&(b.uid_eleve=a,b.onglet_id=c.onglet.id,
_(b).has("id")?b.$update():b.$save())});h(b)},function(){})},function(){})}}]);
